extends layouts/performance-optimized-layout.pug

block layout-content
  // Hero/About Section
  include modules/modern-about.pug

  // Latest Articles Section - Primary Focus
  section.py-5.bg-gradient-primary.text-white
    .container
      .text-center.mb-5
        h2.display-4.fw-bold.mb-3 Latest Insights
        p.lead.mb-4 Discover my most recent articles on software development, Azure, and project management
        .d-flex.justify-content-center.gap-2.flex-wrap
          span.badge.bg-light.text-dark.px-3.py-2 Software Development
          span.badge.bg-light.text-dark.px-3.py-2 Artificial Intelligence
          span.badge.bg-light.text-dark.px-3.py-2 Project Management
          span.badge.bg-light.text-dark.px-3.py-2 Technology Leadership

      #latestArticles.row.g-4.mb-4
        // Latest 6 articles will be populated by JavaScript

      .text-center
        a.btn.btn-light.btn-lg(href='articles.html')
          i.bi.bi-newspaper.me-2
          | Explore All 80+ Articles

  // Published Packages Section
  section.py-5.bg-gradient-success.text-white#published-packages
    .container
      .text-center.mb-5
        h2.display-4.fw-bold.mb-3
          i.bi.bi-box-seam.me-3
          | Published Package Developer
        p.lead.mb-4 Creating open-source tools and libraries for the development community
        .d-flex.justify-content-center.gap-3.flex-wrap.mb-4
          a.badge.bg-light.text-dark.px-4.py-2.fs-6.text-decoration-none(
            href='https://www.npmjs.com/~markhazleton'
            target='_blank'
            rel='noopener noreferrer'
            title='View Mark Hazleton on npm'
          )
            i.bi.bi-npm.me-2
            | npm Profile
          a.badge.bg-light.text-dark.px-4.py-2.fs-6.text-decoration-none(
            href='https://www.nuget.org/profiles/markhazleton'
            target='_blank'
            rel='noopener noreferrer'
            title='View Mark Hazleton on NuGet'
          )
            i.bi.bi-box-seam.me-2
            | NuGet Profile

      .row.g-4.justify-content-center
        .col-lg-5.col-md-6
          .card.h-100.shadow-lg.border-0.package-card
            .card-header.bg-danger.text-white.text-center.py-3
              h3.card-title.mb-0.fs-5
                i.bi.bi-npm.me-2
                | npm Package
            .card-body.p-4
              h4.text-danger.mb-3
                i.bi.bi-lightning-charge.me-2
                | git-spark
              p.mb-3 Honest Git analytics tool that provides transparent repository insights without misleading "health scores" or productivity judgments.

              .mb-3
                h6.text-muted.mb-2 Key Features:
                ul.list-unstyled.small
                  li.mb-1
                    i.bi.bi-check-circle-fill.text-success.me-2
                    | Observable commit patterns & frequency
                  li.mb-1
                    i.bi.bi-check-circle-fill.text-success.me-2
                    | File coupling analysis
                  li.mb-1
                    i.bi.bi-check-circle-fill.text-success.me-2
                    | Author contribution mapping
                  li.mb-1
                    i.bi.bi-check-circle-fill.text-success.me-2
                    | No fake productivity metrics

              .d-flex.gap-2.flex-wrap
                a.btn.btn-danger.btn-sm(
                  href='https://www.npmjs.com/package/git-spark'
                  target='_blank'
                  rel='noopener noreferrer'
                )
                  i.bi.bi-npm.me-2
                  | View on npm
                a.btn.btn-outline-secondary.btn-sm(
                  href='https://markhazleton.github.io/git-spark/'
                  target='_blank'
                  rel='noopener noreferrer'
                )
                  i.bi.bi-book.me-2
                  | Documentation
                a.btn.btn-outline-dark.btn-sm(
                  href='/articles/engineering-metrics-git-spark-real-story.html'
                )
                  i.bi.bi-newspaper.me-2
                  | Read Article

        .col-lg-5.col-md-6
          .card.h-100.shadow-lg.border-0.package-card
            .card-header.bg-primary.text-white.text-center.py-3
              h3.card-title.mb-0.fs-5
                i.bi.bi-box-seam.me-2
                | NuGet Packages
            .card-body.p-4
              h4.text-primary.mb-3
                i.bi.bi-palette.me-2
                | WebSpark Suite
              p.mb-3 Production-ready .NET libraries for modern web development with Bootstrap 5 themes, HTTP client utilities, and enterprise ASP.NET Core integration.

              .mb-3
                h6.text-muted.mb-2 Published Packages:
                ul.list-unstyled.small
                  li.mb-1
                    i.bi.bi-check-circle-fill.text-success.me-2
                    strong WebSpark.Bootswatch
                    |  - Dynamic theme switching (2.1K+ downloads)
                  li.mb-1
                    i.bi.bi-check-circle-fill.text-success.me-2
                    strong WebSpark.HttpClientUtility
                    |  - Resilient HTTP client wrapper (1.2K+ downloads)
                  li.mb-1
                    i.bi.bi-check-circle-fill.text-success.me-2
                    | Polly integration & response caching
                  li.mb-1
                    i.bi.bi-check-circle-fill.text-success.me-2
                    | OpenTelemetry & streaming support

              .d-flex.gap-2.flex-wrap
                a.btn.btn-primary.btn-sm(
                  href='https://www.nuget.org/packages/WebSpark.Bootswatch'
                  target='_blank'
                  rel='noopener noreferrer'
                )
                  i.bi.bi-palette.me-2
                  | Bootswatch
                a.btn.btn-primary.btn-sm(
                  href='https://www.nuget.org/packages/WebSpark.HttpClientUtility'
                  target='_blank'
                  rel='noopener noreferrer'
                )
                  i.bi.bi-code-square.me-2
                  | HttpClient
                a.btn.btn-outline-secondary.btn-sm(
                  href='https://bootswatch.markhazleton.com/'
                  target='_blank'
                  rel='noopener noreferrer'
                )
                  i.bi.bi-globe.me-2
                  | Live Demo

  // AI in Action Section
  section.py-5.bg-light#ai-in-action
    .container
      .text-center.mb-5
        h2.display-4.fw-bold.mb-3 AI in Action
        p.lead.text-muted Recent work transforming complex AI challenges into practical solutions

      .row.justify-content-center
        .col-lg-8
          .card.shadow-lg.border-0.ai-showcase-card
            .card-header.bg-primary.text-white.text-center.py-4
              h3.card-title.mb-0.fs-4
                i.bi.bi-lightning-charge.me-2
                | PromptSpark: LLM Management Platform
            .card-body.p-5
              .row.align-items-center
                .col-md-8
                  .mb-4
                    h4.text-primary.mb-3 The Challenge
                    p.mb-4 Organizations struggle with LLM prompt management—tracking performance, comparing variants, and maintaining consistent AI behavior across deployments.

                  .mb-4
                    h4.text-primary.mb-3 The Solution
                    ul.list-unstyled.mb-0
                      li.mb-2
                        i.bi.bi-check-circle-fill.text-success.me-2
                        | Built comprehensive prompt variant library with A/B testing
                      li.mb-2
                        i.bi.bi-check-circle-fill.text-success.me-2
                        | Implemented real-time performance tracking and analytics
                      li.mb-2
                        i.bi.bi-check-circle-fill.text-success.me-2
                        | Created chat completion interface for iterative testing

                  .mb-4
                    h4.text-primary.mb-3 The Outcome
                    p.mb-0
                      strong Improved AI observability across 3 client deployments
                      | —enabling data-driven prompt optimization and 40% reduction in iteration time.

                .col-md-4.text-center
                  img.img-fluid.rounded.shadow(
                    src='/assets/img/MarkHazleton-PromptSpark-Home.png'
                    alt='PromptSpark Interface'
                    style='max-height: 300px; object-fit: cover;'
                  )
                  .mt-3
                    a.btn.btn-primary(
                      href='https://webspark.markhazleton.com/promptspark'
                      target='_blank'
                      rel='noopener noreferrer'
                    )
                      i.bi.bi-box-arrow-up-right.me-2
                      | Try PromptSpark Live
                    br
                    small.text-muted.mt-2
                      a.text-decoration-none(href='/articles/prompt-spark-revolutionizing-llm-system-prompt-management.html')
                        | Read the full case study →

  // Stats Section
  section.py-5
    .container
      .text-center.mb-5
        h2.display-5.fw-bold.mb-3 Professional Highlights
        p.lead.text-muted Over two decades of technology leadership and innovation
      .row.text-center
        .col-md-3.col-sm-6.mb-4
          .stat-card.h-100
            .stat-number 25+
            .stat-label Years Experience
        .col-md-3.col-sm-6.mb-4
          .stat-card.h-100
            .stat-number 5+
            .stat-label Published Packages
            small.text-muted.d-block.mt-2 npm & NuGet
        .col-md-3.col-sm-6.mb-4
          .stat-card.h-100
            .stat-number 80+
            .stat-label Articles Written
        .col-md-3.col-sm-6.mb-4
          .stat-card.h-100
            .stat-number 12+
            .stat-label Active Projects

  // Featured Technologies Section
  section.py-5.bg-light
    .container
      .text-center.mb-5
        h2.display-5.fw-bold.mb-3 Technology Expertise
        p.lead.text-muted Deep knowledge across modern development stacks
      .row.text-center
        .col-md-4.mb-4
          .card.h-100.shadow-sm.hover-card
            .card-body
              i.bi.bi-microsoft.fs-1.text-primary.mb-3
              h4 .NET & Azure
              p.text-muted Enterprise solutions with Microsoft technologies, cloud architecture, and scalable applications
        .col-md-4.mb-4
          .card.h-100.shadow-sm.hover-card
            .card-body
              i.bi.bi-diagram-3.fs-1.text-success.mb-3
              h4 Project Management
              p.text-muted Agile methodologies, team leadership, and delivering complex technical projects on time
        .col-md-4.mb-4
          .card.h-100.shadow-sm.hover-card
            .card-body
              i.bi.bi-cpu.fs-1.text-warning.mb-3
              h4 AI & Innovation
              p.text-muted Leveraging artificial intelligence and emerging technologies to solve business challenges  // Projects
  include modules/modern_projects.pug

  // Experience Section
  include modules/modern-experience.pug

  // Contact Section
  section.py-5.bg-primary.text-white#contact
    .container
      h2.section-title.text-center.mb-4 Get In Touch
      .row.justify-content-center
        .col-lg-8
          .text-center
            p.lead.mb-4 Interested in discussing technology solutions, project management strategies, or potential collaborations? I'm always open to connecting with fellow technology professionals and business leaders.

            .row.justify-content-center
              .col-md-4.mb-3
                .d-flex.flex-column.align-items-center
                  i.bi.bi-linkedin.fs-1.text-white.mb-3
                  h5 LinkedIn
                  a.btn.btn-light.btn-lg.mb-2(href='https://www.linkedin.com/in/markhazleton/', target='_blank') Connect with Me
                  +linkedinShareButtonCustom('https://markhazleton.com', 'Mark Hazleton - Solutions Architect', 'Technology leader specializing in .NET, Azure, and project management', 'Mark Hazleton', 'Share Profile', 'btn btn-outline-light btn-sm')
              .col-md-4.mb-3
                .d-flex.flex-column.align-items-center
                  i.bi.bi-github.fs-1.text-white.mb-3
                  h5 GitHub
                  a.btn.btn-outline-light.btn-lg(href='https://github.com/markhazleton/', target='_blank') View My Code
              .col-md-4.mb-3
                .d-flex.flex-column.align-items-center
                  i.bi.bi-youtube.fs-1.text-white.mb-3
                  h5 YouTube
                  a.btn.btn-outline-light.btn-lg(href='https://www.youtube.com/@MarkHazleton', target='_blank') Watch Videos

block additional_js
  script.
    // Articles data for homepage
    let articlesData = [];

    // Load articles from JSON
    async function loadLatestArticles() {
      try {
        const response = await fetch('articles.json');
        articlesData = await response.json();

        // Sort by lastmod date (newest first) - Safari-safe date parsing
        articlesData.sort((a, b) => {
          const dateA = new Date(a.lastmod + 'T00:00:00');
          const dateB = new Date(b.lastmod + 'T00:00:00');
          return dateB - dateA;
        });

        displayLatestArticles();
      } catch (error) {
        console.error('Error loading articles:', error);
        document.getElementById('latestArticles').innerHTML =
          '<div class="col-12"><div class="alert alert-warning">Error loading articles. Please visit the <a href="articles.html">Articles page</a> directly.</div></div>';
      }
    }

    // Display latest 6 articles
    function displayLatestArticles() {
      const container = document.getElementById('latestArticles');
      const latest = articlesData.slice(0, 6);

      container.innerHTML = latest.map(article => `
        <div class="col-lg-4 col-md-6">
          <div class="card h-100 shadow-sm hover-card">
            <div class="card-img-wrapper" style="height: 200px; overflow: hidden;">
              <img src="${article.img_src}" class="card-img-top h-100 w-100"
                style="object-fit: cover;" alt="${article.name}">
            </div>
            <div class="card-body d-flex flex-column">
              <div class="mb-2">
                <span class="badge bg-light text-dark">${article.Section}</span>
                <small class="text-light ms-2 opacity-75">${formatDate(article.lastmod)}</small>
              </div>
              <h5 class="card-title ">${article.name}</h5>
              <p class="card-text opacity-75 flex-grow-1">${truncateText(article.description, 120)}</p>
              <a href="${article.slug}" class="btn btn-light">Read Article</a>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Utility functions
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
      });
    }

    function truncateText(text, maxLength) {
      if (!text || text.length <= maxLength) return text || '';
      return text.substring(0, maxLength) + '...';
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      loadLatestArticles();
    });

  // Add styles for the enhanced homepage
  style.
    .bg-gradient-primary {
      background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
    }
    .bg-gradient-success {
      background: linear-gradient(135deg, #28a745 0%, #218838 100%);
    }
    .hover-card {
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .hover-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
    }
    .card-img-wrapper {
      position: relative;
      overflow: hidden;
    }
    .card-img-wrapper img {
      transition: transform 0.3s ease;
    }
    .hover-card:hover .card-img-wrapper img {
      transform: scale(1.05);
    }
    .stat-card {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    .stat-number {
      font-size: 3rem;
      font-weight: bold;
      color: #007bff;
      display: block;
    }
    .stat-label {
      font-size: 1.1rem;
      color: #6c757d;
      margin-top: 0.5rem;
    }
    .badge.text-decoration-none {
      transition: all 0.3s ease;
    }
    .badge.text-decoration-none:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      background-color: #f8f9fa !important;
    }
    .package-card {
      border: none;
      border-radius: 15px;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .package-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
    .package-card .card-header {
      border: none;
    }
    .ai-showcase-card {
      border: none;
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .ai-showcase-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0,123,255,0.15);
    }
    .ai-showcase-card .card-header {
      border: none;
      background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
    }
    @media (max-width: 768px) {
      .display-4 {
        font-size: 2.5rem;
      }
      .display-5 {
        font-size: 2rem;
      }
      .stat-number {
        font-size: 2.5rem;
      }
      .ai-showcase-card .card-body {
        padding: 2rem 1rem;
      }
      .package-card .card-body {
        padding: 2rem 1rem;
      }
    }

