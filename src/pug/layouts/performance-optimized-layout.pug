block variables
  // Performance-Optimized Modern Layout
  // Critical CSS inline, non-critical CSS deferred
  // Uses articles.json data to automatically populate title, description, keywords

doctype html
-
  // Initialize SEO data based on article or custom data
  var seoData = {};
  if (typeof article !== 'undefined' && article) {
    // Article page - use article data with optimizations
    var title = article.seo?.title || article.name;
    var titleSuffix = article.seo?.titleSuffix !== undefined ? article.seo.titleSuffix : ' | Mark Hazleton';
    seoData.title = title + titleSuffix;

    // Optimize description length (120-160 chars)
    var description = article.seo?.description || article.description || '';
    if (description.length > 160) {
      seoData.description = description.substring(0, 157) + '...';
    } else {
      seoData.description = description;
    }

    seoData.keywords = article.seo?.keywords || article.keywords || '';
    seoData.canonical = article.seo?.canonical || `https://markhazleton.com/${article.slug}`;
    seoData.author = article.author || 'Mark Hazleton';
    seoData.robots = article.seo?.robots || 'index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1';

    // Open Graph data
    seoData.ogTitle = article.og?.title || seoData.title;
    seoData.ogDescription = article.og?.description || seoData.description;
    seoData.ogType = article.og?.type || 'article';
    var imageUrl = article.og?.image || article.img_src || '/assets/img/MarkHazleton.jpg';
    seoData.ogImage = imageUrl.startsWith('http') ? imageUrl : 'https://markhazleton.com/' + imageUrl.replace(/^\/+/, '');
    seoData.ogImageAlt = article.og?.imageAlt || (article.name + ' - Mark Hazleton');

    // YouTube video support for Open Graph
    if (article.youtubeUrl) {
      var videoId = '';
      try {
        var url = new URL(article.youtubeUrl);
        // Prefer explicit path patterns first (e.g., /embed/), then host-specific rules
        if (url.pathname.includes('/embed/')) {
          videoId = url.pathname.split('/embed/')[1].split('?')[0];
        } else if (url.hostname.includes('youtu.be')) {
          videoId = url.pathname.substring(1);
        } else if (url.hostname.includes('youtube.com')) {
          videoId = new URLSearchParams(url.search).get('v') || '';
          // Handle YouTube Shorts or other path-based IDs as a fallback
          if (!videoId && url.pathname.startsWith('/shorts/')) {
            videoId = url.pathname.split('/shorts/')[1].split('?')[0];
          }
        }
      } catch (e) {
        // Handle invalid URL
      }

      if (videoId) {
        seoData.ogVideo = `https://www.youtube.com/embed/${videoId}`;
        seoData.ogVideoType = 'text/html';
        seoData.ogVideoWidth = '560';
        seoData.ogVideoHeight = '315';
        seoData.ogVideoSecureUrl = `https://www.youtube.com/embed/${videoId}`;
        // Use YouTube thumbnail as image if no custom image provided
        if (!article.og?.image && !article.img_src) {
          seoData.ogImage = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
          seoData.ogImageAlt = (article.youtubeTitle || article.name) + ' - Video thumbnail';
        }
      }
    }

    // Twitter Card data
    seoData.twitterTitle = article.twitter?.title || seoData.title;
    seoData.twitterDescription = article.twitter?.description || seoData.description;
    var twitterImageUrl = article.twitter?.image || seoData.ogImage;
    seoData.twitterImage = twitterImageUrl.startsWith('http') ? twitterImageUrl : 'https://markhazleton.com/' + twitterImageUrl.replace(/^\/+/, '');
    seoData.twitterImageAlt = article.twitter?.imageAlt || seoData.ogImageAlt;

    // YouTube video support for Twitter Card
    if (article.youtubeUrl && seoData.ogVideo) {
      seoData.twitterCard = 'player';
      seoData.twitterPlayer = seoData.ogVideo;
      seoData.twitterPlayerWidth = '560';
      seoData.twitterPlayerHeight = '315';
    }

  } else {
    // Default page data (can be overridden in page-specific blocks)
    seoData.title = pageTitle || 'Mark Hazleton - Solutions Architect & Technology Leader';
    seoData.description = pageDescription || 'Mark Hazleton - Solutions Architect specializing in .NET, Azure, and project management. 25+ years experience bridging technology with business goals.';
    seoData.keywords = pageKeywords || 'Mark Hazleton, Solutions Architect, .NET Developer, Azure Cloud, Project Management, ASP.NET Core, Software Engineering, Technology Consultant, Web Development, Dallas Texas';
    seoData.canonical = pageCanonical || 'https://markhazleton.com/';
    seoData.author = 'Mark Hazleton';
    seoData.robots = 'index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1';

    // Default Open Graph
    seoData.ogTitle = pageOgTitle || seoData.title;
    seoData.ogDescription = pageOgDescription || seoData.description;
    seoData.ogType = 'website';
    seoData.ogImage = pageOgImage || '/assets/img/MarkHazleton.jpg';
    seoData.ogImageAlt = 'Mark Hazleton - Solutions Architect';

    // Default Twitter Card
    seoData.twitterTitle = pageTwitterTitle || seoData.title;
    seoData.twitterDescription = pageTwitterDescription || seoData.description;
    seoData.twitterImage = pageTwitterImage || seoData.ogImage;
    seoData.twitterImageAlt = seoData.ogImageAlt;
  }

- var today = new Date();
- var yyyy = today.getFullYear();
- var mm = ('0' + (today.getMonth() + 1)).slice(-2);
- var dd = ('0' + today.getDate()).slice(-2);
- var dateString = '' + yyyy + mm + dd;
html(lang='en')
  head
    // Essential Meta Tags
    meta(charset="UTF-8")
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    meta(name='color-scheme', content='light dark')

    // Content Security Policy for Google Analytics support
    meta(http-equiv='Content-Security-Policy', content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google-analytics.com; connect-src 'self' https://www.googletagmanager.com https://www.google-analytics.com https://analytics.google.com https://region1.google-analytics.com https://region1.analytics.google.com https://stats.g.doubleclick.net; img-src 'self' data: https://www.google-analytics.com https://www.googletagmanager.com; style-src 'self' 'unsafe-inline'; font-src 'self'; worker-src 'self'; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self'")

    // Theme color for supported browsers (Chrome, Safari, Edge)
    meta(name='theme-color', content='#2c3e50', media='(prefers-color-scheme: light)')
    meta(name='theme-color', content='#34495e', media='(prefers-color-scheme: dark)')

    // Dynamic SEO Meta Tags from articles.json
    title= seoData.title
    meta(name='description', content=seoData.description)
    meta(name='keywords', content=seoData.keywords)
    meta(name='author', content=seoData.author)
    meta(name='robots', content=seoData.robots)

    // Page-specific metadata block (optional overrides)
    block pagehead

    // Canonical URL
    link(rel='canonical', href=seoData.canonical)

    // Default canonical override block (for backward compatibility)
    block canonical

    // Open Graph Meta Tags - Optimized for LinkedIn Sharing
    meta(property='og:title', content=seoData.ogTitle)
    meta(property='og:description', content=seoData.ogDescription)
    meta(property='og:type', content=seoData.ogType)
    meta(property='og:url', content=seoData.canonical)
    meta(property='og:image', content=seoData.ogImage)
    meta(property='og:image:width', content='1200')
    meta(property='og:image:height', content='630')
    meta(property='og:image:alt', content=seoData.ogImageAlt)
    meta(property='og:site_name', content='Mark Hazleton')
    meta(property='og:locale', content='en_US')

    // LinkedIn-specific optimizations
    meta(property='article:author', content='Mark Hazleton')
    if article && article.publishedDate
      meta(property='article:published_time', content=article.publishedDate)
    if article && article.keywords
      each keyword in article.keywords.split(',')
        meta(property='article:tag', content=keyword.trim())

    // YouTube video Open Graph tags
    if seoData.ogVideo
      meta(property='og:video', content=seoData.ogVideo)
      meta(property='og:video:type', content=seoData.ogVideoType)
      meta(property='og:video:width', content=seoData.ogVideoWidth)
      meta(property='og:video:height', content=seoData.ogVideoHeight)
      meta(property='og:video:url', content=seoData.ogVideo)
      meta(property='og:video:secure_url', content=seoData.ogVideoSecureUrl)

    // Additional Open Graph overrides (for backward compatibility)
    block og_overrides

    // Twitter Card Meta Tags
    if seoData.twitterCard
      meta(name='twitter:card', content=seoData.twitterCard)
    else
      meta(name='twitter:card', content='summary_large_image')
    meta(name='twitter:site', content='@markhazleton')
    meta(name='twitter:creator', content='@markhazleton')
    meta(name='twitter:title', content=seoData.twitterTitle)
    meta(name='twitter:description', content=seoData.twitterDescription)
    meta(name='twitter:image', content=seoData.twitterImage)
    meta(name='twitter:image:alt', content=seoData.twitterImageAlt)

    // YouTube video Twitter Card tags
    if seoData.twitterPlayer
      meta(name='twitter:player', content=seoData.twitterPlayer)
      meta(name='twitter:player:width', content=seoData.twitterPlayerWidth)
      meta(name='twitter:player:height', content=seoData.twitterPlayerHeight)

    // Additional Twitter Card overrides (for backward compatibility)
    block twitter_overrides

    // Favicon and app icons
    link(rel="shortcut icon", href="/assets/img/favicon.ico")
    link(rel='icon', type='image/x-icon', href='/assets/img/favicon.ico')
    link(rel='apple-touch-icon', sizes='180x180', href='/apple-touch-icon.png')
    link(rel='icon', type='image/png', sizes='32x32', href='/favicon-32x32.png')
    link(rel='icon', type='image/png', sizes='16x16', href='/favicon-16x16.png')
    link(rel='manifest', href='/site.webmanifest')

    // RSS Feeds - Articles and Projects
    link(rel='alternate', type='application/rss+xml', title='Mark Hazleton Articles', href='/rss.xml')
    link(rel='alternate', type='application/rss+xml', title='Mark Hazleton Projects', href='/projects-rss.xml')

    // Font preloads for performance
    link(rel='preload', href='/css/fonts/fa-solid-900.woff2', as='font', type='font/woff2', crossorigin='anonymous')
    link(rel='preload', href='/css/fonts/fa-brands-400.woff2', as='font', type='font/woff2', crossorigin='anonymous')

    // Critical CSS (inlined for immediate rendering)
    style#critical-css.
      :root,[data-bs-theme=light]{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-black:#000;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13,110,253;--bs-secondary-rgb:108,117,125;--bs-success-rgb:25,135,84;--bs-info-rgb:13,202,240;--bs-warning-rgb:255,193,7;--bs-danger-rgb:220,53,69;--bs-light-rgb:248,249,250;--bs-dark-rgb:33,37,41;--bs-primary-text-emphasis:#052c65;--bs-secondary-text-emphasis:#2b2f32;--bs-success-text-emphasis:#0a3622;--bs-info-text-emphasis:#055160;--bs-warning-text-emphasis:#664d03;--bs-danger-text-emphasis:#58151c;--bs-light-text-emphasis:#495057;--bs-dark-text-emphasis:#495057;--bs-primary-bg-subtle:#cfe2ff;--bs-secondary-bg-subtle:#e2e3e5;--bs-success-bg-subtle:#d1e7dd;--bs-info-bg-subtle:#cff4fc;--bs-warning-bg-subtle:#fff3cd;--bs-danger-bg-subtle:#f8d7da;--bs-light-bg-subtle:#fcfcfd;--bs-dark-bg-subtle:#ced4da;--bs-primary-border-subtle:#9ec5fe;--bs-secondary-border-subtle:#c4c8cb;--bs-success-border-subtle:#a3cfbb;--bs-info-border-subtle:#9eeaf9;--bs-warning-border-subtle:#ffe69c;--bs-danger-border-subtle:#f1aeb5;--bs-light-border-subtle:#e9ecef;--bs-dark-border-subtle:#adb5bd;--bs-white-rgb:255,255,255;--bs-black-rgb:0,0,0;--bs-font-sans-serif:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Liberation Sans",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--bs-gradient:linear-gradient(180deg,hsla(0,0%,100%,.15),hsla(0,0%,100%,0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-color-rgb:33,37,41;--bs-body-bg:#fff;--bs-body-bg-rgb:255,255,255;--bs-emphasis-color:#000;--bs-emphasis-color-rgb:0,0,0;--bs-secondary-color:rgba(33,37,41,.75);--bs-secondary-color-rgb:33,37,41;--bs-secondary-bg:#e9ecef;--bs-secondary-bg-rgb:233,236,239;--bs-tertiary-color:rgba(33,37,41,.5);--bs-tertiary-color-rgb:33,37,41;--bs-tertiary-bg:#f8f9fa;--bs-tertiary-bg-rgb:248,249,250;--bs-heading-color:inherit;--bs-link-color:#0d6efd;--bs-link-color-rgb:13,110,253;--bs-link-decoration:underline;--bs-link-hover-color:#0a58ca;--bs-link-hover-color-rgb:10,88,202;--bs-code-color:#d63384;--bs-highlight-color:#212529;--bs-highlight-bg:#fff3cd;--bs-border-width:1px;--bs-border-style:solid;--bs-border-color:#dee2e6;--bs-border-color-translucent:rgba(0,0,0,.175);--bs-border-radius:0.375rem;--bs-border-radius-sm:0.25rem;--bs-border-radius-lg:0.5rem;--bs-border-radius-xl:1rem;--bs-border-radius-xxl:2rem;--bs-border-radius-2xl:var(--bs-border-radius-xxl);--bs-border-radius-pill:50rem;--bs-box-shadow:0 0.5rem 1rem rgba(0,0,0,.15);--bs-box-shadow-sm:0 0.125rem 0.25rem rgba(0,0,0,.075);--bs-box-shadow-lg:0 1rem 3rem rgba(0,0,0,.175);--bs-box-shadow-inset:inset 0 1px 2px rgba(0,0,0,.075);--bs-focus-ring-width:0.25rem;--bs-focus-ring-opacity:0.25;--bs-focus-ring-color:rgba(13,110,253,.25);--bs-form-valid-color:#198754;--bs-form-valid-border-color:#198754;--bs-form-invalid-color:#dc3545;--bs-form-invalid-border-color:#dc3545}
      :root{scroll-behavior:smooth}
      *,*::before,*::after{box-sizing:border-box}
      body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}
      .h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{color:var(--bs-heading-color);font-weight:500;line-height:1.2;margin-bottom:.5rem;margin-top:0}
      .h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}
      .h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}
      .lead{font-size:1.25rem;font-weight:300}
      .display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}
      a{color:var(--bs-link-color);text-decoration:var(--bs-link-decoration)}a:hover{color:var(--bs-link-hover-color)}
      .container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{--bs-gutter-x:1.5rem;--bs-gutter-y:0;margin-left:auto;margin-right:auto;padding-left:calc(var(--bs-gutter-x)*.5);padding-right:calc(var(--bs-gutter-x)*.5);width:100%}
      @media (min-width:576px){.container,.container-sm{max-width:540px}}
      @media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}
      @media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}
      @media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}
      @media (min-width:1400px){.container,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{max-width:1320px}}
      .row{--bs-gutter-x:1.5rem;--bs-gutter-y:0;display:flex;flex-wrap:wrap;margin-left:calc(var(--bs-gutter-x)*-.5);margin-right:calc(var(--bs-gutter-x)*-.5);margin-top:calc(var(--bs-gutter-y)*-1)}
      .row>*{flex-shrink:0;margin-top:var(--bs-gutter-y);max-width:100%;padding-left:calc(var(--bs-gutter-x)*.5);padding-right:calc(var(--bs-gutter-x)*.5);width:100%}
      .col-12{flex:0 0 auto;width:100%}
      @media (min-width:768px){.col-md-6{flex:0 0 auto;width:50%}}
      @media (min-width:992px){.col-lg-4{flex:0 0 auto;width:33.33333333%}.col-lg-8{flex:0 0 auto;width:66.66666667%}}
      .btn{--bs-btn-padding-x:0.75rem;--bs-btn-padding-y:0.375rem;--bs-btn-font-family:;--bs-btn-font-size:1rem;--bs-btn-font-weight:400;--bs-btn-line-height:1.5;--bs-btn-color:var(--bs-body-color);--bs-btn-bg:transparent;--bs-btn-border-width:var(--bs-border-width);--bs-btn-border-color:transparent;--bs-btn-border-radius:var(--bs-border-radius);--bs-btn-hover-border-color:transparent;--bs-btn-box-shadow:inset 0 1px 0 hsla(0,0%,100%,.15),0 1px 1px rgba(0,0,0,.075);--bs-btn-disabled-opacity:0.65;--bs-btn-focus-box-shadow:0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb),.5);background-color:var(--bs-btn-bg);border:var(--bs-btn-border-width) solid var(--bs-btn-border-color);border-radius:var(--bs-btn-border-radius);color:var(--bs-btn-color);cursor:pointer;display:inline-block;font-family:var(--bs-btn-font-family);font-size:var(--bs-btn-font-size);font-weight:var(--bs-btn-font-weight);line-height:var(--bs-btn-line-height);padding:var(--bs-btn-padding-y) var(--bs-btn-padding-x);text-align:center;text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}
      .btn:hover{background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);color:var(--bs-btn-hover-color)}
      .btn:focus-visible{background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);box-shadow:var(--bs-btn-focus-box-shadow);color:var(--bs-btn-hover-color);outline:0}
      .btn-primary{--bs-btn-color:#fff;--bs-btn-bg:#0d6efd;--bs-btn-border-color:#0d6efd;--bs-btn-hover-color:#fff;--bs-btn-hover-bg:#0b5ed7;--bs-btn-hover-border-color:#0a58ca;--bs-btn-focus-shadow-rgb:49,132,253;--bs-btn-active-color:#fff;--bs-btn-active-bg:#0a58ca;--bs-btn-active-border-color:#0a53be;--bs-btn-active-shadow:inset 0 3px 5px rgba(0,0,0,.125);--bs-btn-disabled-color:#fff;--bs-btn-disabled-bg:#0d6efd;--bs-btn-disabled-border-color:#0d6efd}
      .btn-outline-light{--bs-btn-color:#f8f9fa;--bs-btn-border-color:#f8f9fa;--bs-btn-hover-color:#000;--bs-btn-hover-bg:#f8f9fa;--bs-btn-hover-border-color:#f8f9fa;--bs-btn-focus-shadow-rgb:248,249,250;--bs-btn-active-color:#000;--bs-btn-active-bg:#f8f9fa;--bs-btn-active-border-color:#f8f9fa;--bs-btn-active-shadow:inset 0 3px 5px rgba(0,0,0,.125);--bs-btn-disabled-color:#f8f9fa;--bs-btn-disabled-bg:transparent;--bs-btn-disabled-border-color:#f8f9fa;--bs-gradient:none}
      .nav{--bs-nav-link-padding-x:1rem;--bs-nav-link-padding-y:0.5rem;--bs-nav-link-font-weight:;--bs-nav-link-color:var(--bs-link-color);--bs-nav-link-hover-color:var(--bs-link-hover-color);--bs-nav-link-disabled-color:var(--bs-secondary-color);display:flex;flex-wrap:wrap;list-style:none;margin-bottom:0;padding-left:0}
      .nav-link{background:none;border:0;color:var(--bs-nav-link-color);display:block;font-size:var(--bs-nav-link-font-size);font-weight:var(--bs-nav-link-font-weight);padding:var(--bs-nav-link-padding-y) var(--bs-nav-link-padding-x);text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}
      .nav-link:focus,.nav-link:hover{color:var(--bs-nav-link-hover-color)}
      .navbar{--bs-navbar-padding-x:0;--bs-navbar-padding-y:0.5rem;--bs-navbar-color:rgba(var(--bs-emphasis-color-rgb),0.65);--bs-navbar-hover-color:rgba(var(--bs-emphasis-color-rgb),0.8);--bs-navbar-disabled-color:rgba(var(--bs-emphasis-color-rgb),0.3);--bs-navbar-active-color:rgba(var(--bs-emphasis-color-rgb),1);--bs-navbar-brand-padding-y:0.3125rem;--bs-navbar-brand-margin-end:1rem;--bs-navbar-brand-font-size:1.25rem;--bs-navbar-brand-color:rgba(var(--bs-emphasis-color-rgb),1);--bs-navbar-brand-hover-color:rgba(var(--bs-emphasis-color-rgb),1);--bs-navbar-nav-link-padding-x:0.5rem;--bs-navbar-toggler-padding-y:0.25rem;--bs-navbar-toggler-padding-x:0.75rem;--bs-navbar-toggler-font-size:1.25rem;--bs-navbar-toggler-icon-bg:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='rgba(33,37,41,0.75)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");--bs-navbar-toggler-border-color:rgba(var(--bs-emphasis-color-rgb),0.15);--bs-navbar-toggler-border-radius:var(--bs-border-radius);--bs-navbar-toggler-focus-width:0.25rem;--bs-navbar-toggler-transition:box-shadow 0.15s ease-in-out;align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between;padding:var(--bs-navbar-padding-y) var(--bs-navbar-padding-x);position:relative}
      .navbar>.container,.navbar>.container-fluid,.navbar>.container-lg,.navbar>.container-md,.navbar>.container-sm,.navbar>.container-xl,.navbar>.container-xxl{align-items:center;display:flex;flex-wrap:inherit;justify-content:space-between}
      .navbar-brand{color:var(--bs-navbar-brand-color);font-size:var(--bs-navbar-brand-font-size);margin-right:var(--bs-navbar-brand-margin-end);padding-bottom:var(--bs-navbar-brand-padding-y);padding-top:var(--bs-navbar-brand-padding-y);text-decoration:none;white-space:nowrap}
      .navbar-brand:focus,.navbar-brand:hover{color:var(--bs-navbar-brand-hover-color)}
      .navbar-nav{--bs-nav-link-padding-x:0;--bs-nav-link-padding-y:0.5rem;--bs-nav-link-font-weight:;--bs-nav-link-color:var(--bs-navbar-color);--bs-nav-link-hover-color:var(--bs-navbar-hover-color);--bs-nav-link-disabled-color:var(--bs-navbar-disabled-color);display:flex;flex-direction:column;list-style:none;margin-bottom:0;padding-left:0}
      .navbar-nav .nav-link.active,.navbar-nav .nav-link.show{color:var(--bs-navbar-active-color)}
      .navbar-collapse{align-items:center;flex-basis:100%;flex-grow:1}
      .navbar-toggler{background-color:transparent;border:var(--bs-border-width) solid var(--bs-navbar-toggler-border-color);border-radius:var(--bs-navbar-toggler-border-radius);color:var(--bs-navbar-color);font-size:var(--bs-navbar-toggler-font-size);line-height:1;padding:var(--bs-navbar-toggler-padding-y) var(--bs-navbar-toggler-padding-x);transition:var(--bs-navbar-toggler-transition)}
      .navbar-toggler:hover{text-decoration:none}
      .navbar-toggler:focus{box-shadow:0 0 0 var(--bs-navbar-toggler-focus-width);outline:0;text-decoration:none}
      .navbar-toggler-icon{background-image:var(--bs-navbar-toggler-icon-bg);background-position:50%;background-repeat:no-repeat;background-size:100%;display:inline-block;height:1.5em;vertical-align:middle;width:1.5em}
      .navbar-expand-lg{flex-wrap:nowrap;justify-content:flex-start}
      @media (min-width:992px){.navbar-expand-lg .navbar-nav{flex-direction:row}.navbar-expand-lg .navbar-nav .nav-link{padding-left:var(--bs-navbar-nav-link-padding-x);padding-right:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-lg .navbar-collapse{display:flex!important;flex-basis:auto}.navbar-expand-lg .navbar-toggler{display:none}}
      .navbar-dark{--bs-navbar-color:hsla(0,0%,100%,.55);--bs-navbar-hover-color:hsla(0,0%,100%,.75);--bs-navbar-disabled-color:hsla(0,0%,100%,.25);--bs-navbar-active-color:#fff;--bs-navbar-brand-color:#fff;--bs-navbar-brand-hover-color:#fff;--bs-navbar-toggler-border-color:hsla(0,0%,100%,.1);--bs-navbar-toggler-icon-bg:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='rgba(255,255,255,0.55)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E")}
      .collapse:not(.show){display:none}
      .fixed-top{top:0;left:0;position:fixed;right:0;z-index:1030}
      .d-flex{display:flex!important}
      .me-auto{margin-right:auto!important}
      .mb-4{margin-bottom:1.5rem!important}
      .ms-auto{margin-left:auto!important}
      .py-5{padding-bottom:3rem!important;padding-top:3rem!important}
      .text-center{text-align:center!important}
      .text-white{--bs-text-opacity:1;color:rgba(var(--bs-white-rgb),var(--bs-text-opacity))!important}
      .bg-dark{--bs-bg-opacity:1;background-color:rgba(var(--bs-dark-rgb),var(--bs-bg-opacity))!important}
      :root{--primary-color:#2c3e50;--secondary-color:#3498db;--accent-color:#e74c3c;--text-color:#333;--light-bg:#f8f9fa;--border-color:#dee2e6}
      body{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;line-height:1.6;color:var(--text-color)}
      .navbar-brand{font-weight:700;font-size:1.5rem}
      .navbar-nav{align-items:center}
      .search-box{min-width:250px;max-width:300px}
      .search-box .form-control{border:1px solid rgba(255,255,255,0.3);background-color:rgba(255,255,255,0.1);color:white;font-size:0.9rem}
      .search-box .form-control::placeholder{color:rgba(255,255,255,0.7)}
      .search-box .form-control:focus{border-color:rgba(255,255,255,0.5);background-color:rgba(255,255,255,0.2);box-shadow:0 0 0 0.2rem rgba(255,255,255,0.25);color:white}
      .search-box .btn-outline-light{border-color:rgba(255,255,255,0.3)}
      .search-box .btn-outline-light:hover{background-color:rgba(255,255,255,0.1);border-color:rgba(255,255,255,0.5)}
      .search-box .btn-outline-light:focus{box-shadow:0 0 0 0.2rem rgba(255,255,255,0.25)}
      .navbar .social-icons{margin-left:1rem}
      .navbar .social-icons a{color:rgba(255,255,255,0.8);font-size:1.2rem;margin:0 0.5rem;transition:color 0.3s ease;text-decoration:none}
      .navbar .social-icons a:hover{color:white}
      @media (max-width:768px){.hero-section{padding:60px 0}.hero-section h1{font-size:2.5rem}.search-box{min-width:100%;margin:0.5rem 0}.search-box .form-control{font-size:0.9rem}.navbar .social-icons{margin:0.5rem 0;justify-content:center}.navbar .social-icons a{margin:0 0.75rem}}
      @media (max-width:991px){.navbar-collapse .search-box{margin:1rem 0;max-width:100%}.navbar-collapse .social-icons{margin-top:1rem;justify-content:center}}
      @media (min-width:992px){.navbar-nav{align-items:center}.search-box{margin:0 1rem}.navbar .social-icons{margin-left:1rem}}

      /* Critical form controls for search box */
      .form-control{display:block;width:100%;padding:0.375rem 0.75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);background-color:var(--bs-body-bg);background-image:none;border:var(--bs-border-width) solid var(--bs-border-color);appearance:none;border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}
      .form-control:focus{color:var(--bs-body-color);background-color:var(--bs-body-bg);border-color:#86b7fe;outline:0;box-shadow:0 0 0 0.25rem rgba(13,110,253,.25)}
      .input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}
      .input-group>.form-control{position:relative;flex:1 1 auto;width:1%;min-width:0}
      .input-group:not(.has-validation)>.form-control:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}
      .input-group>.btn{position:relative;z-index:2}
      .input-group>.btn:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}

      /* Critical Font Awesome base styles */
      @font-face{font-family:"Font Awesome 6 Free";font-style:normal;font-weight:900;font-display:swap;src:url("/css/fonts/fa-solid-900.woff2") format("woff2")}
      @font-face{font-family:"Font Awesome 6 Brands";font-style:normal;font-weight:400;font-display:swap;src:url("/css/fonts/fa-brands-400.woff2") format("woff2")}
      .fa,.fab,.fad,.fal,.far,.fas{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1}
      .fas{font-family:"Font Awesome 6 Free";font-weight:900}
      .fab{font-family:"Font Awesome 6 Brands";font-weight:400}
      .fa-search:before{content:"\f002"}
      .fa-linkedin-in:before{content:"\f0e1"}
      .fa-github:before{content:"\f09b"}
      .fa-youtube:before{content:"\f167"}
      .fa-rss:before{content:"\f09e"}

      /* Screen reader support */
      .visually-hidden{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}

    // Non-critical CSS (deferred) - Using modern-styles.css until proper extraction is completed
    link(rel='preload', href='/css/modern-styles.css', as='style', onload="this.onload=null;this.rel='stylesheet'")
    noscript: link(rel='stylesheet', href='/css/modern-styles.css')

    // Fallback for older browsers
    script.
      (function() {
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = '/css/modern-styles.css';
        var supportsPreload = link.relList && link.relList.supports && link.relList.supports('preload');
        if (!supportsPreload) {
          document.head.appendChild(link);
        }
      })();

    // Enhanced JSON-LD Structured Data for SEO
    script(type="application/ld+json").
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Mark Hazleton",
        "givenName": "Mark",
        "familyName": "Hazleton",
        "jobTitle": "Solutions Architect",
        "description": "Solutions Architect passionate for solutions which make technology work for business",
        "url": "https://markhazleton.com",
        "image": {
          "@type": "ImageObject",
          "url": "https://markhazleton.com/assets/img/MarkHazleton.jpg",
          "width": 400,
          "height": 400
        },
        "sameAs": [
          "https://www.linkedin.com/in/markhazleton/",
          "https://github.com/markhazleton/",
          "https://twitter.com/markhazleton/",
          "https://www.youtube.com/@MarkHazleton"
        ],
        "knowsAbout": [
          ".NET Framework",
          "ASP.NET Core",
          "Microsoft Azure",
          "Project Management",
          "Web Development",
          "Solution Architecture",
          "Software Engineering",
          "Cloud Computing",
          "Artificial Intelligence",
          "Machine Learning"
        ],
        "alumniOf": {
          "@type": "Organization",
          "name": "University of North Texas"
        },
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Wichita",
          "addressRegion": "KS",
          "addressCountry": "US"
        },
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://markhazleton.com/"
        }
      }

    // Additional structured data for specific pages
    block additional_structured_data

    // Additional page-specific CSS
    block additional_css

    // Include LinkedIn sharing mixins
    include ../modules/linkedin-sharing

    // Deferred Google Analytics to prevent render blocking
    // Google Analytics - Optimized for performance and CSP compliance
    script.
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-L8GVZNDH0B');

      // Load gtag.js after page load
      window.addEventListener('load', function() {
        var script = document.createElement('script');
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-L8GVZNDH0B';
        script.async = true;
        document.head.appendChild(script);
      });

  body
    // Navigation
    nav.navbar.navbar-expand-lg.navbar-dark.bg-dark.fixed-top(role='navigation', aria-label='Main navigation')
      .container-fluid
        a.navbar-brand(href='/#', aria-label='Mark Hazleton homepage') Mark Hazleton

        button.navbar-toggler(type='button', data-bs-toggle='collapse', data-bs-target='#navbarNav',
          aria-controls='navbarNav', aria-expanded='false', aria-label='Toggle navigation')
          span.navbar-toggler-icon

        #navbarNav.collapse.navbar-collapse
          ul.navbar-nav.me-auto
            li.nav-item
              a.nav-link.active(href='/#about', aria-current='page') About Mark
            li.nav-item
              a.nav-link(href='/projects.html') Projects
            li.nav-item
              a.nav-link(href='/articles.html') Articles

          // Search Box - Inside collapsible navbar
          form.d-flex.me-3.my-2.my-lg-0(onsubmit='return searchArticles(event)')
            .input-group.search-box
              input#headerSearchInput.form-control(
                type='search'
                placeholder='Search articles...'
                aria-label='Search articles'
                autocomplete='off'
              )
              button.btn.btn-outline-light(type='submit', aria-label='Search')
                i.fas.fa-search

          // Social Icons - Inside collapsible navbar
          .d-flex.social-icons
            a(href='https://www.linkedin.com/in/markhazleton/', target='_blank', rel='noopener noreferrer', title='LinkedIn')
              i.fab.fa-linkedin-in
              span.visually-hidden LinkedIn Profile
            a(href='https://github.com/markhazleton/', target='_blank', rel='noopener noreferrer', title='GitHub')
              i.fab.fa-github
              span.visually-hidden GitHub Profile
            a(href='https://www.youtube.com/@MarkHazleton', target='_blank', rel='noopener noreferrer', title='YouTube')
              i.fab.fa-youtube
              span.visually-hidden YouTube Channel
            a(href='/rss.xml', target='_blank', rel='noopener noreferrer', title='Articles RSS Feed')
              i.fas.fa-rss
              span.visually-hidden Articles RSS Feed
            a(href='/projects-rss.xml', target='_blank', rel='noopener noreferrer', title='Projects RSS Feed')
              i.fas.fa-rss
              span.visually-hidden Projects RSS Feed
    br
    block layout-content

    // Auto-include floating LinkedIn share for article pages
    if typeof article !== 'undefined' && article
      +floatingLinkedInShare(article)

    // Footer
    footer
      .container
        .row
          .col-md-6.mb-4
            h5.mb-3 Mark Hazleton
            p.text-light Solutions Architect passionate for solutions which make technology work for business. Lifelong learner, not sidetracked by sizzle.
            .social-icons
              a(href='https://www.linkedin.com/in/markhazleton/', target='_blank', rel='noopener noreferrer', aria-label='LinkedIn')
                i.fab.fa-linkedin-in
                span.visually-hidden LinkedIn Profile
              a(href='https://github.com/markhazleton/', target='_blank', rel='noopener noreferrer', aria-label='GitHub')
                i.fab.fa-github
                span.visually-hidden GitHub Profile
              a(href='https://www.youtube.com/@MarkHazleton', target='_blank', rel='noopener noreferrer', aria-label='YouTube')
                i.fab.fa-youtube
                span.visually-hidden YouTube Channel
              a(href='/rss.xml', target='_blank', rel='noopener noreferrer', aria-label='Articles RSS Feed')
                i.fas.fa-rss
                span.visually-hidden Articles RSS Feed
              a(href='/projects-rss.xml', target='_blank', rel='noopener noreferrer', aria-label='Projects RSS Feed')
                i.fas.fa-rss
                span.visually-hidden Projects RSS Feed
          .col-md-3.mb-4
            h6.mb-3 Quick Links
            ul.list-unstyled.footer-links
              li: a(href='/#about') About
              li: a(href='/#experience') Experience
              li: a(href='/projects.html') Projects
              li: a(href='/articles.html') Articles
          .col-md-3.mb-4
            h6.mb-3 Resources
            ul.list-unstyled.footer-links
              li: a(href='/projectmechanics/') Project Mechanics
              li: a(href='https://webspark.markhazleton.com') WebSpark
              li: a(href='/rss.xml') RSS Feed
              li: a(href='/sitemap.xml') Sitemap

        hr.my-4
        .row
          .col-12.text-center
            p.mb-0 &copy; #{new Date().getFullYear()} Mark Hazleton. All rights reserved.

    // Search functionality and Bootstrap JavaScript (deferred)
    script(defer, src='/js/bootstrap.bundle.min.js')
    script(defer, src='/js/search.js')

    // Deferred JavaScript loading
    script.
      // Load main scripts after page load to prevent blocking
      window.addEventListener('load', function() {
        var script = document.createElement('script');
        script.src = '/js/scripts.js';
        document.body.appendChild(script);

        // Google Analytics - only load after page is fully loaded
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-146971717-1', 'auto');
        ga('send', 'pageview');
      });

    //- Additional page-specific JavaScript
    block additional_js
